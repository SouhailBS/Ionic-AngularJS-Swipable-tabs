angular.module("ionic").directive("tabsSwipable",["$ionicGesture",function(e){return{restrict:"A",require:"ionTabs",link:function(t,n,a,i){var r={},d=function(e){document.contains(document.getElementById("ionTabsAnimatedStyle"))&&document.getElementById("ionTabsAnimatedStyle").remove();for(var n=0;n<i.tabs.length;n++)ionView=angular.element(document.querySelector("ion-nav-view[name='"+i.tabs[n].navViewName+"']")),ionView.css({left:"initial"}),n!=i.selectedIndex()&&ionView.attr("nav-view","cached");if(e.gesture.distance>window.screen.width/1.6||e.gesture.distance/(e.gesture.timeStamp-e.gesture.startEvent.timeStamp)>.1){var a=i.selectedIndex();"right"==e.gesture.direction&&a--,"left"==e.gesture.direction&&a++,a>=0&&a<i.tabs.length&&a!=i.selectedIndex()&&t.$apply(i.select(a))}},o=function(e){var t=nextTarget=i.selectedIndex(),n=angular.element(document.querySelector("ion-nav-view[name='"+i.tabs[t].navViewName+"']")),a=null,r=document.querySelector("[tabs-swipable] .tabs .tab-item.tab-item-active").offsetWidth,d=document.getElementById("ionTabsAnimatedStyle")||document.createElement("style");if(d.setAttribute("id","ionTabsAnimatedStyle"),d.innerHTML=".tab-item-active::after{position: absolute;width: "+r+"px;}",d.innerHTML+=".tab-item-active::after{transform: translateX( "+-e.gesture.deltaX/5+"px);}",!(t<0)&&("right"==e.gesture.direction&&nextTarget--,"left"==e.gesture.direction&&nextTarget++,nextTarget>=0&&nextTarget<i.tabs.length&&(a=angular.element(document.querySelector("ion-nav-view[name='"+i.tabs[nextTarget].navViewName+"']"))),"right"==e.gesture.direction&&nextTarget>=0||"left"==e.gesture.direction&&nextTarget<i.tabs.length)){var o={};o.left=e.gesture.deltaX+"px",n.css(o),"left"==e.gesture.direction&&(o.left=window.screen.width+e.gesture.deltaX+"px"),"right"==e.gesture.direction&&(o.left=e.gesture.deltaX-window.screen.width+"px"),a.attr("nav-view","active"),a.css(o),!document.contains(d)&&document.getElementsByTagName("head")[0].append(d)}};r.drag=e.on("drag",o,n),r.dragend=e.on("dragend",d,n),t.$on("$destroy",function(){e.off(r.drag,"drag",o),e.off(r.dragend,"dragend",d)})}}}]),"function"!=typeof Element.prototype.append&&(Element.prototype.append=function(e){this.innerHTML+=e.outerHTML});